<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>README.rdoc</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            README.rdoc
        </h1>
        <ul class="files">
            <li>README.rdoc</li>
            <li>Last modified: Mon Feb 01 18:29:37 -0500 2010</li>
        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <h1>Ruby Client for Remember The Milk</h1>
<table>
<tr><td valign="top">Author:</td><td>Dave Copeland (<a href="mailto:davetron5000">davetron5000</a> at g mail dot
com)

</td></tr>
<tr><td valign="top">Copyright:</td><td>Copyright &#169; 2009 by Dave Copeland

</td></tr>
<tr><td valign="top">License:</td><td>Distributes under the Apache License, see LICENSE.txt in the source distro

</td></tr>
</table>
<h2>Install</h2>
<p>
Note that the most up-to-date version of the gem is hosted at [<a
href="http://www.gemcutter.org">www.gemcutter.org</a>], so you&#8217;ll
need a one-time setup if you aren&#8217;t already using Gemcutter as your
primary source for gems.
</p>
<pre>
    # Only if you aren't using gemcutter yet
    sudo gem install gemcutter
    sudo gem tumble

    # Once Gemcutter is setup
    sudo gem install moocow
</pre>
<h2>Overview</h2>
<p>
This is a very lightweight and easy-to-use client for [<a
href="http://www.rememberthemilk.com">www.rememberthemilk.com</a>]
</p>
<pre>
    require 'moocow'

    rtm = RTM::RTM.new(RTM::Endpoint.new(your_api_key,your_secret))
    rtm.token = user_token
    response = rtm.tasks.getList
    response.tasks.list.as_array.each do |list|
      # this is an RTM list of taskseries
    end
</pre>
<h3>Authorization</h3>
<p>
Authorization is a bit tricky, but you only need to do it one time. This
example shows command line/desktop usage
</p>
<pre>
    rtm = RTM.new(Endpoint.new(your_api_key,your_secret))
    auth = rtm.auth
    url = auth.url
    frob = auth.frob
    # Send user to this URL
    # They will authorize your app's api_key via the RTM website.
    # store the frob somewhere, you will need it
    #
    # When they return...
    auth.frob=frob
    rtm.token=auth.get_token
    # store the token for all time

    rtm.tasks.getList
    rtm.groups.delete
    rtm.tasks.notes.add
</pre>
<p>
And so forth. Basically, you can call the <a
href="../classes/RTM.html">RTM</a> methods as if they were real methods.
</p>
<h3>Responses</h3>
<p>
As shown above, you can simply navigate the XML returned by method names.
This uses <a href="../classes/Hash.html#M000031">Hash.method_missing</a>
and can be dicey, so you can also navigate a bit safer via
</p>
<pre>
    response = rtm.tasks.getList
    response['tasks']['list'].as_array.each do |list|
      # this is an RTM list of taskseries
    end
</pre>
<p>
Note that for any element that you want to treat as a list, you must call
as_array on it, to ensure that it gets turned into a list. The underlying
HTTParty code doesn&#8217;t know if an XML element is supposed to be a list
or just a singular.
</p>
<p>
<em>Note that you can use Ruby-style conventions instead of camel-case,
e.g. <tt>rtm.tasks.get_list</tt></em>
</p>
<h3>Timelines</h3>
<p>
Many methods require timelines; this is the way that <a
href="../classes/RTM.html">RTM</a> provides for undo-type features. If you
don&#8217;t really care about this, or want it done for you, you can
specify auto timeline creation:
</p>
<pre>
    rtm.auto_timeline=true
    rtm.tasks.add(:name =&gt; 'My new task')
    timeline = rtm.last_timeline
</pre>
<p>
This will create a timeline for you, and use it to create the task. The
list of methods that <b>do not</b> require timelines is used to determine
if this is done, and is based on the <a href="../classes/RTM.html">RTM</a>
documentation at the time of this writing.
</p>
<h2>Basic Command Line</h2>
<p>
To verify and play with the <a href="../classes/RTM.html">RTM</a> API,
there is a command-line tool called <tt>rtm</tt>. It takes the following
commands:
</p>
<dl>
<dt>any</dt><dd>executes any <a href="../classes/RTM.html">RTM</a> method

</dd>
<dt>auth</dt><dd>Prints out the auth URL to authorize your api key/ruby client. Do not do
this after getting a token

</dd>
<dt>chktoken</dt><dd>Checks that your token is valid

</dd>
<dt>help</dt><dd>Shows list of commands or help for one command

</dd>
<dt>ls</dt><dd>Lists incomplete tasks

</dd>
<dt>token</dt><dd>Gets your token; do this only once and put it in your api.yaml file

</dd>
</dl>
<p>
The easiest way to get started is to get your API Key and Secret from <a
href="../classes/RTM.html">RTM</a> and then:
</p>
<pre>
   rtm ls
</pre>
<p>
This will init your api.yaml file
</p>
<pre>
   rtm auth
</pre>
<p>
Go to this URL and authorize your API Key. Save the frob that is printed
out
</p>
<pre>
    rtm token &lt;&lt;frob&gt;&gt;
</pre>
<p>
This will authorize your app and print out your token. Edit
<tt>api.yaml</tt> and add your token.
</p>
<pre>
    :token: &lt;&lt;your token&gt;&gt;
</pre>
<p>
To verify:
</p>
<pre>
    rtm ls
</pre>
<p>
This should list your incomplete tasks if all is well.
</p>
<pre>
    rtm any contacts.getList
</pre>
<p>
Will print out a hashdump of what <a href="../classes/RTM.html">RTM</a>
returns for this method.
</p>
<h2>Links</h2>
<ul>
<li><a
href="http://github.com/davetron5000/rtm">github.com/davetron5000/rtm</a> -
Source code

</li>
<li><a
href="http://davetron5000.github.com/rtm">davetron5000.github.com/rtm</a> -
Rubydoc

</li>
<li><a
href="http://www.rememberthemilk.com/services/api/methods/">www.rememberthemilk.com/services/api/methods/</a>
- <a href="../classes/RTM.html">RTM</a> API documentation

</li>
</ul>

    </div>
    

    

    
    

    
    

    

    

    

    

    

    
</div>
    </div>
  </body>
</html>